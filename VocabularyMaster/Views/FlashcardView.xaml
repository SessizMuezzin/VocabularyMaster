<UserControl x:Class="VocabularyMaster.WPF.Views.FlashcardView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             mc:Ignorable="d" 
             d:DesignHeight="700" d:DesignWidth="1000">

    <UserControl.Resources>
        <SolidColorBrush x:Key="PrimaryColor" Color="#6C5CE7"/>
        <SolidColorBrush x:Key="SecondaryColor" Color="#A29BFE"/>
        <SolidColorBrush x:Key="SuccessColor" Color="#00B894"/>
        <SolidColorBrush x:Key="DangerColor" Color="#FF7675"/>
        <SolidColorBrush x:Key="BackgroundColor" Color="#DFE6E9"/>
        <SolidColorBrush x:Key="CardBackground" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextColor" Color="#2D3436"/>

        <Style x:Key="ModernButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource PrimaryColor}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Padding" Value="20,10"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                CornerRadius="20" 
                                Padding="{TemplateBinding Padding}"
                                SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                            <Border.Effect>
                                <DropShadowEffect Color="Black" Opacity="0.1" BlurRadius="5" ShadowDepth="2"/>
                            </Border.Effect>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#5849BE"/>
                                <Setter TargetName="border" Property="Effect">
                                    <Setter.Value>
                                        <DropShadowEffect Color="{Binding Background, ElementName=border}" Opacity="0.4" BlurRadius="10" ShadowDepth="3"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="border" Property="RenderTransform">
                                    <Setter.Value>
                                        <ScaleTransform ScaleX="0.98" ScaleY="0.98"/>
                                    </Setter.Value>
                                </Setter>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="border" Property="Background" Value="#B2BEC3"/>
                                <Setter TargetName="border" Property="Effect" Value="{x:Null}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="OutlineButtonStyle" TargetType="Button" BasedOn="{StaticResource ModernButtonStyle}">
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Foreground" Value="#636E72"/>
            <Setter Property="BorderBrush" Value="#B2BEC3"/>
            <Setter Property="BorderThickness" Value="2"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border x:Name="border" 
                                Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="20" 
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="border" Property="Background" Value="#EFEFEF"/>
                                <Setter TargetName="border" Property="BorderBrush" Value="{StaticResource PrimaryColor}"/>
                                <Setter Property="Foreground" Value="{StaticResource PrimaryColor}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SuccessButtonStyle" TargetType="Button" BasedOn="{StaticResource ModernButtonStyle}">
            <Setter Property="Background" Value="{StaticResource SuccessColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#00A383"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="DangerButtonStyle" TargetType="Button" BasedOn="{StaticResource ModernButtonStyle}">
            <Setter Property="Background" Value="{StaticResource DangerColor}"/>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#D63031"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid Background="{StaticResource BackgroundColor}">
        <Grid.RowDefinitions>
            <RowDefinition Height="80"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="100"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="White" Padding="20,0">
            <Border.Effect>
                <DropShadowEffect Color="Black" Direction="270" ShadowDepth="2" BlurRadius="10" Opacity="0.05"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0" VerticalAlignment="Center">
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="Vocabulary" FontWeight="Bold" FontSize="22" Foreground="{StaticResource PrimaryColor}"/>
                        <TextBlock Text="Master" FontWeight="Light" FontSize="22" Foreground="{StaticResource TextColor}"/>
                    </StackPanel>

                    <Grid Margin="0,5,0,0" Width="300" HorizontalAlignment="Left">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <ProgressBar Value="{Binding CurrentIndex}" Maximum="{Binding TotalCount}" 
                                     Height="6" BorderThickness="0" Background="#F1F2F6" Foreground="{StaticResource PrimaryColor}"
                                     VerticalAlignment="Center" Margin="0,0,10,0"/>
                        <TextBlock Grid.Column="1" Text="{Binding ProgressText}" FontSize="12" Foreground="#B2BEC3" FontWeight="Bold"/>
                    </Grid>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                    <Border Background="#F1F2F6" CornerRadius="10" Padding="15,5" Margin="0,0,20,0">
                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="📊" Margin="0,0,5,0"/>
                            <TextBlock Text="{Binding SessionStats}" FontWeight="SemiBold" Foreground="#636E72"/>
                        </StackPanel>
                    </Border>

                    <Button Content="Karıştır" Command="{Binding ShuffleCommand}" Style="{StaticResource OutlineButtonStyle}" Margin="0,0,10,0" Height="35" Padding="15,0"/>
                    <Button Content="Yeniden Başlat" Command="{Binding RestartCommand}" Style="{StaticResource OutlineButtonStyle}" Height="35" Padding="15,0"/>
                </StackPanel>
            </Grid>
        </Border>

        <Grid Grid.Row="1">
            <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center"
                        Visibility="{Binding HasWords, Converter={StaticResource InverseBoolToVisibilityConverter}}">
                <TextBlock Text="📭" FontSize="80" HorizontalAlignment="Center" Opacity="0.5"/>
                <TextBlock Text="Liste Boş" FontSize="28" FontWeight="Bold" Foreground="#B2BEC3" HorizontalAlignment="Center" Margin="0,10,0,5"/>
                <TextBlock Text="Lütfen önce kelime ekleyin." FontSize="16" Foreground="#B2BEC3" HorizontalAlignment="Center"/>
            </StackPanel>

            <Border Width="600" Height="400"
                    Background="White"
                    CornerRadius="25"
                    Cursor="Hand"
                    MouseLeftButtonDown="Card_Click"
                    Visibility="{Binding HasWords, Converter={StaticResource BoolToVisibilityConverter}}">
                <Border.Effect>
                    <DropShadowEffect Color="#6C5CE7" BlurRadius="40" ShadowDepth="10" Opacity="0.15"/>
                </Border.Effect>

                <Grid>
                    <Border HorizontalAlignment="Right" VerticalAlignment="Top" Margin="20"
                            Background="#F0F3FF" CornerRadius="10" Padding="12,6">
                        <TextBlock Text="{Binding IsFlipped, Converter={StaticResource BoolToVisibilityConverter}, StringFormat='TR', TargetNullValue='EN'}" 
                                   FontWeight="Bold" Foreground="{StaticResource PrimaryColor}">
                            <TextBlock.Style>
                                <Style TargetType="TextBlock">
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsFlipped}" Value="True">
                                            <Setter Property="Text" Value="TR"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsFlipped}" Value="False">
                                            <Setter Property="Text" Value="EN"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </TextBlock.Style>
                        </TextBlock>
                    </Border>

                    <Grid Visibility="{Binding IsFlipped, Converter={StaticResource InverseBoolToVisibilityConverter}}"
                          VerticalAlignment="Center" HorizontalAlignment="Center">
                        <StackPanel>
                            <TextBlock Text="{Binding EnglishWord}" 
                                       FontSize="56" 
                                       FontWeight="Bold" 
                                       Foreground="{StaticResource TextColor}"
                                       TextAlignment="Center" TextWrapping="Wrap" MaxWidth="500">
                                <TextBlock.Effect>
                                    <DropShadowEffect Color="White" BlurRadius="2" ShadowDepth="0" Opacity="1"/>
                                </TextBlock.Effect>
                            </TextBlock>

                            <TextBlock Text="Cevabı görmek için tıklayın" 
                                       FontSize="14" Foreground="#B2BEC3" 
                                       HorizontalAlignment="Center" Margin="0,30,0,0"/>
                        </StackPanel>
                    </Grid>

                    <Grid Visibility="{Binding IsFlipped, Converter={StaticResource BoolToVisibilityConverter}}"
                          VerticalAlignment="Center" HorizontalAlignment="Center">
                        <StackPanel>
                            <TextBlock Text="{Binding TurkishMeanings}" 
                                       FontSize="42" 
                                       FontWeight="SemiBold" 
                                       Foreground="{StaticResource PrimaryColor}"
                                       TextAlignment="Center" TextWrapping="Wrap" MaxWidth="500"/>

                            <Border Background="#F1F2F6" CornerRadius="10" Padding="15" Margin="0,25,0,0" MaxWidth="500"
                                    Visibility="{Binding ExampleSentence, Converter={StaticResource NullToVisibilityConverter}}">
                                <StackPanel>
                                    <TextBlock Text="Örnek Cümle:" FontSize="12" Foreground="#B2BEC3" FontWeight="Bold" Margin="0,0,0,5"/>
                                    <TextBlock Text="{Binding ExampleSentence}" 
                                               FontSize="16" FontStyle="Italic" Foreground="#636E72"
                                               TextWrapping="Wrap" TextAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </Grid>

        <Grid Grid.Row="2" Margin="50,0,50,20">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0" Content="←" 
                    Command="{Binding PreviousCardCommand}"
                    Style="{StaticResource OutlineButtonStyle}" Width="60" Height="60" FontSize="24" Padding="0"/>

            <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">

                <Button Content="Kartı Çevir" 
                        Command="{Binding FlipCardCommand}"
                        Style="{StaticResource ModernButtonStyle}" Width="200" Height="50"
                        Visibility="{Binding IsFlipped, Converter={StaticResource InverseBoolToVisibilityConverter}}"/>

                <StackPanel Orientation="Horizontal" Visibility="{Binding IsFlipped, Converter={StaticResource BoolToVisibilityConverter}}">
                    <Button Content="Yanlış" 
                            Command="{Binding MarkWrongCommand}"
                            Style="{StaticResource DangerButtonStyle}" Width="140" Height="50" Margin="0,0,20,0">
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="✕" Margin="0,0,10,0"/>
                                    <TextBlock Text="{Binding}"/>
                                </StackPanel>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>

                    <Button Content="Doğru" 
                            Command="{Binding MarkCorrectCommand}"
                            Style="{StaticResource SuccessButtonStyle}" Width="140" Height="50">
                        <Button.ContentTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Horizontal">
                                    <TextBlock Text="✓" Margin="0,0,10,0"/>
                                    <TextBlock Text="{Binding}"/>
                                </StackPanel>
                            </DataTemplate>
                        </Button.ContentTemplate>
                    </Button>
                </StackPanel>
            </StackPanel>

            <Button Grid.Column="2" Content="→" 
                    Command="{Binding NextCardCommand}"
                    Style="{StaticResource ModernButtonStyle}" Width="60" Height="60" FontSize="24" Padding="0"/>
        </Grid>
    </Grid>
</UserControl>